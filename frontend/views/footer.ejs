<script>
    window.userLoggedIn = false;

    function isLoggedIn(){
        let accessToken = localStorage.getItem("accessToken");
        if(accessToken != null){
            // if there is an access token in localstorage
            window.userLoggedIn = true;
        }
        let loggedInBlock = document.getElementById("logged-in-buttons");
        let loggedOutBlock = document.getElementById("logged-out-buttons");
        if (window.userLoggedIn) {
            loggedOutBlock.style.display = "none";
            loggedInBlock.style.display = "block";
        } else {
            loggedInBlock.style.display = "none";
            loggedOutBlock.style.display = "block";
        }
        
    }

    window.onload = function(){
        isLoggedIn(); // when the page loads call isLoggedIn
    }

    document.getElementById("logout-btn").addEventListener("click", function(event) {
        event.preventDefault();
        if (window.userLoggedIn) {
          // if user is logged in, log them out
          localStorage.removeItem("accessToken");
          localStorage.removeItem("refreshToken");
          window.location.href = "/";
        } else {
          // if user is not logged in, log them in
          window.location.href = "/login";
        }
      });


      document.addEventListener('DOMContentLoaded', () => {

        // Get all "navbar-burger" elements
        const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

        // Check if there are any navbar burgers
        if ($navbarBurgers.length > 0) {

            // Add a click event on each of them
            $navbarBurgers.forEach( el => {
                el.addEventListener('click', () => {

                // Get the target from the "data-target" attribute
                const target = el.dataset.target;
                const $target = document.getElementById(target);

                // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                el.classList.toggle('is-active');
                $target.classList.toggle('is-active');

                });
            });
        }

        });
    </script>
</body>
<footer>
    <div class="content has-text-centered">
        <p>
          <strong>Shoppinga</strong> by <a href="https://gitlab.computing.dcu.ie/martid46/">Duarte Martinho</a> <span>&copy;</span> 2022 <span>&bull;</span> All rights reserved
        </p>
      </div>
</footer>
</html>